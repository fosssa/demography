# Анализ демографических данных Росстата

Этот проект предназначен для анализа демографических данных (рождаемость и смертность) из Росстата. Он включает скрипты для получения, обработки данных, расчета статистических показателей и генерации отчетов.

## Структура проекта

-   `birth_detailed.ipynb`: Jupyter Notebook для детального анализа данных по рождаемости.
-   `death_detailed.ipynb`: Jupyter Notebook для детального анализа данных по смертности.
-   `pyproject.toml`: Файл конфигурации проекта и зависимостей для PDM.
-   `requirements.txt`: Список зависимостей проекта (сгенерирован PDM).
-   `README.md`: Этот файл.
-   `rosstat_analysis_output/`: Директория с результатами анализа.
    -   `birth_detailed/`: Результаты анализа данных по рождаемости (Excel, JSON, TXT).
    -   `death_detailed/`: Результаты анализа данных по смертности (Excel, JSON, TXT).
-   `src/svirkin/`: Основной исходный код проекта (в настоящее время содержит только `__init__.py`).
-   `utils/`: Вспомогательные скрипты.
    -   `descriptive_statistics.py`: Функции для расчета описательных статистик.
    -   `explore_data.py`: Функция для первичного исследования данных.
    -   `get_data_from_emiss.py`: Функция для загрузки данных с сайта Росстата (fedstat.ru).


## Используемые библиотеки

Проект использует следующие основные библиотеки:

-   **pandas**: для обработки и анализа данных.
-   **numpy**: для численных вычислений.
-   **scipy**: для научных и технических вычислений, включая статистические функции.
-   **plotly**: для создания интерактивных графиков.
-   **requests**: для выполнения HTTP-запросов (используется для получения данных с fedstat.ru).
-   **xlrd** и **openpyxl**: для чтения и записи файлов Excel.
-   **nbformat**: для работы с Jupyter Notebooks.
-   **pydantic**: для валидации данных.

Полный список зависимостей можно найти в файле `pyproject.toml`.

## Реализованные методы

### `utils/descriptive_statistics.py`

-   `calculate_descriptive_statistics(data: Series, type: str) -> dict`: Рассчитывает основные статистические показатели для предоставленного ряда данных (среднее, медиана, стандартное отклонение, минимум, максимум, размах, асимметрия, эксцесс, количество наблюдений).
-   `get_largest_variance(data: DataFrame, n: int = 3) -> list[str]`: Возвращает список строк, описывающих `n` категорий с наибольшей дисперсией (стандартным отклонением).
-   `get_largest_skewness(data: DataFrame, n: int = 3) -> list[str]`: Возвращает список строк, описывающих `n` категорий с наибольшей асимметрией.
-   `get_largest_kurtosis(data: DataFrame, n: int = 3) -> list[str]`: Возвращает список строк, описывающих `n` категорий с наибольшим эксцессом.

### `utils/explore_data.py`

-   `explore_data(data: DataFrame) -> None`: Выполняет первичный анализ данных: выводит информацию о размере набора данных, количестве годовых столбцов, наличии пропущенных значений и количестве уникальных значений в категориальных столбцах.

### `utils/get_data_from_emiss.py`

-   `get_data_from_emiss(indicator: str, payload: dict, timeout=30) -> pd.DataFrame | None`: Загружает данные с веб-сайта Росстата (fedstat.ru) по указанному идентификатору показателя и параметрам запроса. Возвращает DataFrame или None в случае ошибки.

## Jupyter Notebooks

-   **`birth_detailed.ipynb`**: В этом ноутбуке производится загрузка, очистка, анализ и визуализация данных о рождаемости. Рассчитываются описательные статистики, исследуется динамика по годам и территориям, выявляются ключевые тенденции. Результаты сохраняются в директорию `rosstat_analysis_output/birth_detailed/`.
-   **`death_detailed.ipynb`**: Аналогично ноутбуку по рождаемости, здесь анализируются данные о смертности. Проводятся те же этапы обработки и анализа, результаты сохраняются в `rosstat_analysis_output/death_detailed/`.

## Настройка виртуального окружения и запуск

Проект использует [PDM](https://pdm-project.org/) для управления зависимостями и виртуальным окружением.

1.  **Установите PDM** (если еще не установлен):
    ```bash
    pip install pdm
    ```

2.  **Клонируйте репозиторий** (если вы этого еще не сделали):
    ```bash
    git clone <URL_репозитория>
    cd <имя_папки_проекта>
    ```

3.  **Создайте виртуальное окружение и установите зависимости**:
    PDM автоматически обнаружит файл `pyproject.toml` и создаст для него окружение.
    ```bash
    pdm install
    ```
    Эта команда создаст `.venv` в корне проекта (если не настроено иначе) и установит все зависимости, указанные в `pyproject.toml`.

4.  **Активируйте виртуальное окружение**:
    PDM предоставляет команду для запуска команд внутри окружения проекта:
    ```bash
    pdm run python your_script.py
    ```
    Или вы можете активировать окружение стандартным способом (путь к `activate` может немного отличаться в зависимости от вашей ОС и оболочки):
    -   Для PowerShell:
        ```powershell
        .venv\Scripts\Activate.ps1
        ```
    -   Для Bash/Zsh:
        ```bash
        source .venv/bin/activate
        ```
    -   Для Cmd.exe:
        ```batch
        .venv\Scripts\activate.bat
        ```

После активации окружения вы сможете запускать Jupyter Notebooks и Python-скрипты проекта.

## Над проектом работали

- Мова Ирина
- Пашкова Дарья
- Радькова Ирина
- Храмцов Андрей

## Примечания

Работа над проектом происходила в рамках курса "Методы статистической обработки информации" 2 семестра магистерской программы "Математическое и информационное обеспечение экономической деятельности".